<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Capacitación</title>

    <link rel="stylesheet" th:href="@{/css/aspirante-menu.css}">
    <link rel="stylesheet" th:href="@{/css/capacitacion.css}">
</head>

<body>

<div class="layout">

    <!-- HEADER SUPERIOR -->
    <header class="topbar">
        <div class="topbar-left">
            <span class="brand">EMPLEO</span>

            <button id="toggleSidebar" class="menu-toggle">
                <span></span><span></span><span></span>
            </button>
        </div>

        <div class="topbar-right">
            <img class="avatar" th:src="@{${fotoAspirante}}">
            <span class="user-name" th:text="${nombreAspirante}">Aspirante</span>
        </div>
    </header>

    <div class="body">

        <!-- SIDEBAR -->
        <aside id="sidebar" class="sidebar">
            <ul>
                <li><a th:href="@{/aspirante/datos-personales}">
                    <img src="/img/icon-datos.png"><span>Datos Personales</span>
                </a></li>

                <li><a th:href="@{/aspirante/escolaridad}">
                    <img src="/img/icon-escolaridad.png"><span>Escolaridad</span>
                </a></li>

                <li><a th:href="@{/aspirante/experiencia-laboral}">
                    <img src="/img/icon-experiencia.png"><span>Experiencia Laboral</span>
                </a></li>

                <li class="active"><a th:href="@{/aspirante/capacitacion}">
                    <img src="/img/icon-capacitacion1.png"><span>Capacitación</span>
                </a></li>

                <li><a th:href="@{/aspirante/conocimientos}">
                    <img src="/img/icon-conocimiento.png"><span>Conocimientos</span>
                </a></li>

                <li><a th:href="@{/aspirante/competencias}">
                    <img src="/img/icon-competencias.png"><span>Competencias</span>
                </a></li>
                <li><a th:href="@{/aspirante/cargardocumentos}">
                    <img src="/img/icon-competencias.png">
                    <span>Cargar Documentos</span>
                </a></li>

                <li><a th:href="@{/aspirante/cambiar-contrasena}">
                    <img src="/img/icon-password.png"><span>Contraseña</span>
                </a></li>

                <li><a th:href="@{/aspirante/eliminar-cuenta}">
                    <img src="/img/icon-eliminar.png"><span>Eliminar Usuario</span>
                </a></li>
            </ul>

            <div class="logout-section">
                <a th:href="@{/logout}" class="logout-btn">CERRAR SESIÓN</a>
            </div>
        </aside>


        <!-- CONTENIDO PRINCIPAL -->
        <main id="content" class="content">

            <h2 class="titulo-seccion">CAPACITACIÓN</h2>
            <p class="sub-text">Gestiona tu información de capacitaciones realizadas.</p>

            <button class="btn-add" onclick="mostrarFormulario()">+ Agregar nuevo</button>

            <!-- TABLA -->
            <table class="tabla-registros">
                <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Área</th>
                    <th>Tipo</th>
                    <th>Institución</th>
                    <th>Inicio</th>
                    <th>Fin</th>
                    <th>Horas</th>
                    <th>Acciones</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="c : ${listaCapacitacion}">
                    <td th:text="${c.descCurso}">Curso</td>
                    <td th:text="${c.area}">Área</td>
                    <td th:text="${c.tipoCurso}">Tipo</td>
                    <td th:text="${c.institucion}">Institución</td>
                    <td th:text="${c.descFechaInicio}">Inicio</td>
                    <td th:text="${c.descFechaFin}">Fin</td>
                    <td th:text="${c.horas}">Horas</td>

                    <td>
                        <a th:href="@{'/aspirante/capacitacion/editar/' + ${c.idCapacitacion}}" class="btn-edit">Editar</a>
                        <a th:href="@{'/aspirante/capacitacion/eliminar/' + ${c.idCapacitacion}}"
                           onclick="return confirm('¿Eliminar registro?')" class="btn-delete">Eliminar</a>
                    </td>
                </tr>
                </tbody>


            </table>


            <!-- FORMULARIO -->
            <div id="form-capacitacion"
                 class="form-box"
                 th:classappend="${mostrarForm} ? '' : ' hidden'">


            <h2 class="titulo-seccion">CAPACITACIÓN</h2>

                <form th:action="@{/aspirante/capacitacion/guardar}"
                      th:object="${capacitacionForm}" method="post">

                    <input type="hidden" th:field="*{idCapacitacion}">
                    <input type="hidden" th:field="*{idPersona}">

                    <h3 class="subtitulo">CAPACITACIÓN RECIBIDA EN LOS ÚLTIMOS TRES AÑOS</h3>

                    <div class="row">
                        <div class="col">
                            <label>Nombre de la capacitación:</label>
                            <input type="text" th:field="*{descCurso}">
                        </div>

                        <div class="col">
                            <label>Área de la capacitación:</label>
                            <select th:field="*{idAreaCapacitacion}">
                                <option value="">-- Seleccionar --</option>
                                <option th:each="a : ${areasCapacitacion}"
                                        th:value="${a.idArea}"
                                        th:text="${a.desArea}">
                                </option>
                            </select>
                        </div>
                    </div>

                    <h3 class="subtitulo">DATOS DE LA CAPACITACIÓN</h3>

                    <div class="row">
                        <div class="col">
                            <label>Tipo de capacitación:</label>
                            <select th:field="*{idTipoCurso}">
                                <option value="">-- Seleccionar --</option>
                                <option th:each="t : ${tiposCurso}"
                                        th:value="${t.idCurso}"
                                        th:text="${t.nomCurso}">
                                </option>
                            </select>
                        </div>

                        <div class="col">
                            <label>Institución:</label>
                            <select th:field="*{idInstitucion}">
                                <option value="">-- Seleccionar --</option>
                                <option th:each="i : ${institucionesCapacitacion}"
                                        th:value="${i.idInstitucion}"
                                        th:text="${i.desInstitucion}">
                                </option>
                            </select>
                        </div>
                    </div>

                    <h3 class="subtitulo">DURACIÓN DE LA CAPACITACIÓN</h3>

                    <div class="row">
                        <div class="col">
                            <label>Fecha de inicio:</label>
                            <input type="date" th:field="*{descFechaInicio}">
                        </div>

                        <div class="col">
                            <label>Fecha de término:</label>
                            <input type="date" th:field="*{descFechaFin}">
                        </div>

                        <div class="col">
                            <label>Duración (HORAS):</label>
                            <select th:field="*{idHorasCurso}">
                                <option value="">-- Seleccionar --</option>
                                <option th:each="h : ${horasCurso}"
                                        th:value="${h.idHorasCurso}"
                                        th:text="${h.desHoras}">
                                </option>
                            </select>

                        </div>
                    </div>

                    <div class="acciones">
                        <button type="button" class="btn-cancelar" onclick="cancelar()">CANCELAR</button>
                        <button type="submit" class="btn-guardar">GUARDAR</button>
                    </div>

                </form>

            </div>

        </main>
    </div>
</div>


<script th:src="@{/js/aspirante-menu.js}"></script>

<script>
    function mostrarFormulario() {
        document.getElementById("form-capacitacion").classList.remove("hidden");
    }

    function cancelar() {
        document.getElementById("form-capacitacion").classList.add("hidden");
    }
</script>

</body>
</html>
