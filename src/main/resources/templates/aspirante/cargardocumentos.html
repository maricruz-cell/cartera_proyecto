<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cargar Documentos</title>

    <link rel="stylesheet" th:href="@{/css/aspirante-menu.css}">

    <style>
        body {
            background: #F4F4F4;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .content-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0px 3px 6px rgba(0,0,0,0.15);
            margin-top: 20px;
        }

        h2.titulo {
            text-align: center;
            margin-top: 0;
            color: #333;
            font-size: 24px;
        }

        p.descripcion {
            text-align: center;
            width: 70%;
            margin: auto;
            font-size: 14px;
            margin-bottom: 30px;
            color: #555;
        }

        /* GRID DE TARJETAS */
        .grid-doc {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 20px;
        }

        .doc-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0px 2px 5px rgba(0,0,0,0.10);
            padding: 20px;
            border-left: 7px solid #7B1E3D;
            transition: 0.2s;
        }

        .doc-card:hover {
            transform: translateY(-3px);
            box-shadow: 0px 4px 10px rgba(0,0,0,0.18);
        }

        .doc-title {
            font-size: 18px;
            font-weight: bold;
            margin: 0 0 10px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .estado {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .estado.ok {
            color: green;
        }

        .estado.bad {
            color: #b00000;
        }

        .btn {
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }

        .btn-ver {
            background: #1b7f1b;
            color: white;
            text-decoration: none;
        }

        .btn-subir {
            background: #7B1E3D;
            color: white;
            margin-top: 5px;
        }

        .input-file {
            margin-top: 10px;
        }

        .footer {
            margin-top: 25px;
            text-align: center;
            font-size: 11px;
            color: #666;
            padding-bottom: 20px;
        }
    </style>
</head>

<body>

<div class="layout">

    <!-- ▬▬▬ TOPBAR ▬▬▬ -->
    <header class="topbar">
        <div class="topbar-left">
            <span class="brand">EMPLEO</span>

            <button id="toggleSidebar" class="menu-toggle">
                <span></span><span></span><span></span>
            </button>
        </div>

        <div class="topbar-right">
            <img class="avatar" th:src="@{${fotoAspirante}}">
            <span class="user-name" th:text="${nombreAspirante}">Aspirante</span>
        </div>
    </header>

    <div class="body">

        <!-- ▬▬▬ SIDEBAR ▬▬▬ -->
        <aside id="sidebar" class="sidebar">
            <ul>
                <li><a th:href="@{/aspirante/datos-personales}"><img src="/img/icon-datos.png"><span>Datos Personales</span></a></li>
                <li><a th:href="@{/aspirante/escolaridad}"><img src="/img/icon-escolaridad.png"><span>Escolaridad</span></a></li>
                <li><a th:href="@{/aspirante/experiencia-laboral}"><img src="/img/icon-experiencia.png"><span>Experiencia Laboral</span></a></li>
                <li><a th:href="@{/aspirante/capacitacion}"><img src="/img/icon-capacitacion1.png"><span>Capacitación</span></a></li>
                <li><a th:href="@{/aspirante/conocimientos}"><img src="/img/icon-conocimiento.png"><span>Conocimientos Específicos</span></a></li>
                <li><a th:href="@{/aspirante/competencias}"><img src="/img/icon-competencias.png"><span>Competencias y Habilidades</span></a></li>

                <li class="active"><a th:href="@{/aspirante/cargardocumentos}">
                    <img src="/img/icon-competencias.png"><span>Cargar Documentos</span></a></li>

                <li><a th:href="@{/aspirante/cambiar-contrasena}"><img src="/img/icon-password.png"><span>Cambiar Contraseña</span></a></li>
                <li><a th:href="@{/aspirante/eliminar-cuenta}"><img src="/img/icon-eliminar.png"><span>Eliminar Usuario</span></a></li>
            </ul>

            <div class="logout-section">
                <a th:href="@{/logout}" class="logout-btn">CERRAR SESIÓN</a>
            </div>
        </aside>

        <!-- ▬▬▬ CONTENIDO ▬▬▬ -->
        <main id="content" class="content">

            <div class="content-box">

                <h2 class="titulo">CARGA DE DOCUMENTOS</h2>

                <p class="descripcion">
                    Sube los documentos solicitados (INE, CURP, Acta de nacimiento, Comprobante de domicilio).
                    Solo puedes cargar **un archivo por cada tipo objetivo**.
                </p>

                <!-- GRID DE DOCUMENTOS -->
                <div class="grid-doc">

                    <div class="doc-card"
                         th:each="tipo : ${tiposDocumento}"
                         th:with="doc=${mapDocs[tipo.idTipoDocumento]}">

                        <div class="doc-title">
                            <img src="/img/icon-pdf.png" width="22">
                            <span th:text="${tipo.nombre}"></span>
                        </div>

                        <!-- Si YA se subió -->
                        <div th:if="${doc != null}">
                            <p class="estado ok">✔ Documento cargado</p>

                            <a th:href="@{'/files/' + ${doc.idDocumento}}" target="_blank" class="btn btn-ver">
                                Ver documento
                            </a>
                        </div>

                        <!-- Si NO se ha subido -->
                        <div th:if="${doc == null}">
                            <p class="estado bad">✖ No cargado</p>

                            <form th:action="@{/aspirante/cargardocumentos/guardar}"
                                  method="post"
                                  enctype="multipart/form-data">

                                <input type="hidden" name="tipoDocumento" th:value="${tipo.idTipoDocumento}">

                                <input class="input-file" type="file" name="archivo" required>

                                <button class="btn btn-subir" type="submit">
                                    Subir Archivo
                                </button>
                            </form>
                        </div>

                    </div>

                </div>

                <div class="footer">
                    SUBDIRECCIÓN DE RECLUTAMIENTO Y SELECCIÓN DEL PERSONAL
                </div>

            </div>

        </main>

    </div>
</div>

<script th:src="@{/js/aspirante-menu.js}"></script>

</body>
</html>
